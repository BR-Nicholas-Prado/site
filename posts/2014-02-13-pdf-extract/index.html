<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="PDFs are the bane of every lawyer's existence. It is unfortunate that we break free of our addiction to PDFs and this is the thought behind my RMOC project. Until that is a viable option for working with PDFs, here is my suite of free PDF tools that can be used in the stead of the overly engineered Acrobat.
Reading PDFs Most any distro will contain a PDF reader. By default Ubuntu installs Evince which is lightweight and works as a viewer."><meta name=keywords content="legaltech,resilience,pdfs,linux"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://caseykuhlman.com/posts/2014-02-13-pdf-extract/><title>Working with PDFs in Linux :: underWater desert Blogging — Casey Kuhlman's Site</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.84ed5579024525d4b50458514d1a43e40dd5272df45c7cd6da85b225af457154.css><meta itemprop=name content="Working with PDFs in Linux"><meta itemprop=description content="PDFs are the bane of every lawyer's existence. It is unfortunate that we break free of our addiction to PDFs and this is the thought behind my RMOC project. Until that is a viable option for working with PDFs, here is my suite of free PDF tools that can be used in the stead of the overly engineered Acrobat.
Reading PDFs Most any distro will contain a PDF reader. By default Ubuntu installs Evince which is lightweight and works as a viewer."><meta itemprop=datePublished content="2014-02-13T00:00:00+00:00"><meta itemprop=dateModified content="2014-02-13T00:00:00+00:00"><meta itemprop=wordCount content="1051"><meta itemprop=image content="https://caseykuhlman.com/"><meta itemprop=keywords content="pdfs,linux,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://caseykuhlman.com/"><meta name=twitter:title content="Working with PDFs in Linux"><meta name=twitter:description content="PDFs are the bane of every lawyer's existence. It is unfortunate that we break free of our addiction to PDFs and this is the thought behind my RMOC project. Until that is a viable option for working with PDFs, here is my suite of free PDF tools that can be used in the stead of the overly engineered Acrobat.
Reading PDFs Most any distro will contain a PDF reader. By default Ubuntu installs Evince which is lightweight and works as a viewer."><meta property="article:section" content="Linux for Lawyers"><meta property="article:published_time" content="2014-02-13 00:00:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>cd home</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://caseykuhlman.com/about>About</a></li><li><a href=https://caseykuhlman.com/posts>Blog</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>5 minutes</p></div><article><h1 class=post-title><a href=https://caseykuhlman.com/posts/2014-02-13-pdf-extract/>Working with PDFs in Linux</a></h1><div class=post-content><p>PDFs are the bane of every lawyer's existence. It is unfortunate that we break free of our addiction to PDFs and this is the thought behind my RMOC project. Until that is a viable option for working with PDFs, here is my suite of <strong>free</strong> PDF tools that can be used in the stead of the overly engineered Acrobat.</p><h2 id=reading-pdfs>Reading PDFs</h2><p>Most any distro will contain a PDF reader. By default Ubuntu installs Evince which is lightweight and works as a viewer. Evince still has not implemented any highlight or annotate functions, but that is OK for me since I only use PDFs to read and then copy whatever I need into Sublime Text &ndash; which is where I create 99% of my documents. One of my partners likes to use Okular which has highlighting and annotating features to it. The problem is that Okular runs on KDE a different desktop environment from what I use (Gnome) and Okular does not integrate with GTK (the Gnome Toolkit for Desktop Applications) this means that installing Okular requires a ton of packages that I would never use but for within Okular. In the past I have tried it but have found that &ndash; for me &ndash; it is a too-much solution. Installing Okular is straightforward:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install okular
</code></pre></div><p>Then you are all set to go.</p><h2 id=extracting-pdfs>Extracting PDFs</h2><p>Sometimes I prefer reading PDFs on Android with <a href="https://play.google.com/store/apps/details?id=udk.android.reader">ezPDF Reader</a> as its interface is nice. I generally will do this on my tablet. Then I simply save the PDF in my Dropbox which will sync to my desktop. After that, I forked a command line tool (I think from <a href="http://blog.hartwork.org/?p=612">here</a>) for python which extracts the notes that I added to the document into a command line tool which I can then copy and paste into Sublime.</p><p>To use the extractor, you need to have a few packages installed first:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install poppler-data poppler-utils python-poppler
</code></pre></div><p>Then you will need to paste the following script into your ~/.bin folder (or anywhere else that is in your path). I called this ~/.bin/extractpdfs but of course you can call it anything.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#!/usr/bin/env python</span>
<span style=color:#75715e>#^jist /home/coda/.bin/extractpdfs -u 8666561</span>

<span style=color:#f92672>import</span> poppler
<span style=color:#f92672>import</span> sys
<span style=color:#f92672>import</span> urllib
<span style=color:#f92672>import</span> os

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
  input_filename <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>]
    <span style=color:#75715e># http://blog.hartwork.org/?p=612</span>
  document <span style=color:#f92672>=</span> poppler<span style=color:#f92672>.</span>document_new_from_file(<span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>file://</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> \
    urllib<span style=color:#f92672>.</span>pathname2url(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>abspath(input_filename)), None)
  n_pages <span style=color:#f92672>=</span> document<span style=color:#f92672>.</span>get_n_pages()
  all_annots <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>

  <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n_pages):
        page <span style=color:#f92672>=</span> document<span style=color:#f92672>.</span>get_page(i)
        annot_mappings <span style=color:#f92672>=</span> page<span style=color:#f92672>.</span>get_annot_mapping ()
        num_annots <span style=color:#f92672>=</span> len(annot_mappings)
        <span style=color:#66d9ef>if</span> num_annots <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
            <span style=color:#66d9ef>for</span> annot_mapping <span style=color:#f92672>in</span> annot_mappings:
                <span style=color:#66d9ef>if</span>  annot_mapping<span style=color:#f92672>.</span>annot<span style=color:#f92672>.</span>get_annot_type()<span style=color:#f92672>.</span>value_name <span style=color:#f92672>!=</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>POPPLER_ANNOT_LINK</span><span style=color:#e6db74>&#39;</span>:
                    all_annots <span style=color:#f92672>+</span><span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
                    <span style=color:#75715e>#print &#39;page: {0:3}, {1:10}, type: {2:10}, content: {3}&#39;.format(i+1, annot_mapping.annot.get_modified(), annot_mapping.annot.get_annot_type().value_nick, annot_mapping.annot.get_contents())</span>
                    <span style=color:#66d9ef>print</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>page: {0:3}: {3}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>, annot_mapping<span style=color:#f92672>.</span>annot<span style=color:#f92672>.</span>get_modified(), annot_mapping<span style=color:#f92672>.</span>annot<span style=color:#f92672>.</span>get_annot_type()<span style=color:#f92672>.</span>value_nick, annot_mapping<span style=color:#f92672>.</span>annot<span style=color:#f92672>.</span>get_contents())

  <span style=color:#66d9ef>if</span> all_annots <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
    <span style=color:#66d9ef>print</span> str(all_annots) <span style=color:#f92672>+</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74> annotation(s) found</span><span style=color:#e6db74>&#34;</span>
  <span style=color:#66d9ef>else</span>:
    <span style=color:#66d9ef>print</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>no annotations found</span><span style=color:#e6db74>&#34;</span>

<span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>__main__</span><span style=color:#e6db74>&#34;</span>:
    main()
</code></pre></div><p>If you just want to use the script as is then you can simply call the following from the command line.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget -O $FILE https://gist.github.com/compleatang/8666561/raw/79ee25d3d1a4c6f1ed7c0e9de1db951d947e3b17/extractpdfs
</code></pre></div><p>What this script does is to extract the annotations into a text output on the command line. I could not figure out how to extract the highlights because of the weird way that highlighting works and because poppler is not currently set up for that. There is a ruby gem called pdf-reader that I have worked with a bit that I <em>think</em> would work for extracting highlights but I have not had the time to work with it in detail.</p><p>The output of calling the <code>extractpdfs $PDF_FILE</code> will look something like this:</p><p>page: 24: why did she not want to go thru her records&mldr;?
page: 26: make a chart detailing her claims, his payments, and the amounts she says she is borrowing?
page: 28: use this figure as illustrative for making the chart.
page: 31: fix this.</p><h2 id=ocr-ing-pdfs>OCR-ing PDFs</h2><p>When you get actual paper the first thing most lawyers <em>should</em> do is to scan and OCR (optical character recognition &ndash; or make the scan so that you can search and copy and paste the text) the document. I use gscan2pdf to do this. It is a straight forward gui application what will ocr and clean up your pdf documents.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install gscan2pdf
</code></pre></div><p>![gscan2pdf]({{ site.url }}{{ site.root }}{{ site.images_dir }}/{{ page.date | date: &ldquo;%Y&rdquo; }}/gscan.png)</p><p>I have used a lot of the OCR gui's available for Ubuntu and for my money gscan is the best. Cleaning up PDFs and OCRing them is just a click or two away.</p><p>The difficulty that sometimes arises is that open source OCR technology is quite a bit behind proprietary technology. On Windows there are a couple of really good OCR technologies and on OSX there are also, but those vendors ignore Linux for the most part. Given how much I use OCR I would happily pay for a Linux native solution which is not Abby's per page basis, but I have not found one that I believe will work for me. So for now, I am left with the open source solutions. Gscan will integrate with the major OCR technologies on Linux and when you go to OCR your document you can choose which one you want to use. It will not be perfect, especially if you have a bad scane, but it will be a decent 80% solution that is 100% free.</p><h2 id=modifying-pdfs>Modifying PDFs</h2><p>Splitting PDFs, combining PDFs, deleting pages from PDFs, rearranging PDFs is most simple on Linux than it is with Adobe if you ask me. I use a great package called pdfmod which lets me do all of these things.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install pdfmod
</code></pre></div><p>![pdfmod]({{ site.url }}{{ site.root }}{{ site.images_dir }}/{{ page.date | date: &ldquo;%Y&rdquo; }}/pdfmod.png)</p><p>Once you have it installed it is very straightforward to split, combine, delete pages, add pages, and rearrange pages in your PDFs. Basically the package does just what you want it to do, you can drag and drop all the pages to correctly order your PDF's; you can drag in pages from other windows; you can click on pages and press delete to remove them. It is very straight forward.</p><h2 id=summary>Summary</h2><p>Working with PDFs in Linux is not 100% ideal and the programs to work with PDFs are not cohesive as you may get with Adobe in windows or osx. However, it is imminently manageable with some combination of Evince, Gscan2PDF and PdfMod you can get to almost a complete solution.</p><p>Happy Hacking!</p><p>~ # ~</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://caseykuhlman.com/tags/pdfs>pdfs</a></span><span class=tag><a href=https://caseykuhlman.com/tags/linux>linux</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1051 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2014-02-13 00:00 +0000</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://caseykuhlman.com/posts/2014-02-17-structuring-automatic-virtual-contracts/><span class=button__icon>←</span>
<span class=button__text>How I Would Structure Automatic Virtual Contracts</span></a></span>
<span class="button next"><a href=https://caseykuhlman.com/posts/2014-02-11-remember-your-packages/><span class=button__text>Remembering Your Packages</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2020</span>
<span>Casey Kuhlman</span>
<span><a href=https://caseykuhlman.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script></body></html>