<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Casey Kuhlman"><meta name=description content="This week I threw together a little site for the daughter of some friends. Lexie is my friends&amp;rsquo; daughter and she is lovely. She had to do a Flat Stanley project but she named it Flat Lexie instead. So they sent me a Flat Lexie and we basically travelled the world together &amp;ndash; flat lexie and I. We had a few adventures so I wanted to try to capture the pictures I took but also to capture the geography and background of the different places."><meta name=keywords content="legaltech,resilience,authoritarianism,ruby,javascript,google maps"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://caseykuhlman.com/muniments/2013/2013-04-25-flat-lexie-does-javascript/><title>Flat Lexie Does Javascript :: underWater desert Blogging â€” A Site About Resilience and Authoritarianism</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.84ed5579024525d4b50458514d1a43e40dd5272df45c7cd6da85b225af457154.css><meta itemprop=name content="Flat Lexie Does Javascript"><meta itemprop=description content="This week I threw together a little site for the daughter of some friends. Lexie is my friends&rsquo; daughter and she is lovely. She had to do a Flat Stanley project but she named it Flat Lexie instead. So they sent me a Flat Lexie and we basically travelled the world together &ndash; flat lexie and I. We had a few adventures so I wanted to try to capture the pictures I took but also to capture the geography and background of the different places."><meta itemprop=datePublished content="2013-04-25T00:00:00+00:00"><meta itemprop=dateModified content="2020-04-09T17:54:44+01:00"><meta itemprop=wordCount content="887"><meta itemprop=keywords content="ruby,javascript,google maps,"><meta property="og:title" content="Flat Lexie Does Javascript"><meta property="og:description" content="This week I threw together a little site for the daughter of some friends. Lexie is my friends&rsquo; daughter and she is lovely. She had to do a Flat Stanley project but she named it Flat Lexie instead. So they sent me a Flat Lexie and we basically travelled the world together &ndash; flat lexie and I. We had a few adventures so I wanted to try to capture the pictures I took but also to capture the geography and background of the different places."><meta property="og:type" content="article"><meta property="og:url" content="https://caseykuhlman.com/muniments/2013/2013-04-25-flat-lexie-does-javascript/"><meta property="article:published_time" content="2013-04-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-09T17:54:44+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Flat Lexie Does Javascript"><meta name=twitter:description content="This week I threw together a little site for the daughter of some friends. Lexie is my friends&rsquo; daughter and she is lovely. She had to do a Flat Stanley project but she named it Flat Lexie instead. So they sent me a Flat Lexie and we basically travelled the world together &ndash; flat lexie and I. We had a few adventures so I wanted to try to capture the pictures I took but also to capture the geography and background of the different places."><meta property="article:section" content="development"><meta property="article:published_time" content="2013-04-25 00:00:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>cd ~/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://caseykuhlman.com/posts>Entries</a></li><li><a href=https://caseykuhlman.com/about>Me, About</a></li><li><a href=https://caseykuhlman.com/muniments>Muniments</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://caseykuhlman.com/muniments/2013/2013-04-25-flat-lexie-does-javascript/>Flat Lexie Does Javascript</a></h2><div class=post-content><p>This week I threw together a little site for the daughter of some friends. Lexie is my friends&rsquo; daughter and she is lovely. She had to do a Flat Stanley project but she named it Flat Lexie instead. So they sent me a Flat Lexie and we basically travelled the world together &ndash; flat lexie and I. We had a few adventures so I wanted to try to capture the pictures I took but also to capture the geography and background of the different places. Indeed, this is supposed to be the point of the Flat Stanley/Flat Lexie exercises for kids to know about the world. In any event, <a href=http://flatlexie.caseykuhlman.com>here</a> is the result; <a href=https://github.com/compleatang/flat-lexie>here</a> is the code.</p><p>It is a simple Sinatra app (first for me), running on Heroku (another first for me), which integrates the <a href=https://github.com/HPNeo/gmaps>gMaps</a> package I installed with Bower (first, first), and a bit of jQuery I added along the way to tie everything together (not a first).</p><h2 id=lessons-learned>Lessons Learned</h2><p>What did I learn?</p><ul><li>I like Ruby.</li><li>I'm not sure I like javascript.</li><li>At a minimum, I'm pretty awful at javascript.</li><li>In any event I'm more comfortable with Ruby.</li><li>Sinatra is smooth.</li><li>Heroku is smooth.</li><li>I still have to figure out how to pass JSON data to javascript run views from Ruby controllers that doesn't rely on data attributes &ndash; as that feels like such a patch.</li></ul><h2 id=how>How</h2><p>The chunk that took me the biggest portion of time was building the javascript file that would tie gMaps, jQuery and the view together. I built the view so it would preload all of the images in boxes that I wanted to slideToggle the display of in sequence. This was straight-forward jQuery, nothing special there.</p><p>Then I wanted the map which comprises a 100%x100% background to move around zoom in and zoom out on certain events. Basically I wanted the map to start zoomed out, so that Lexie could see the context, and then after waiting a few seconds I wanted to zoom in to the pinpoint location. When moving to the next picture in the series I wanted the sequence to run like this: slideToggle the old picture/entry, I wanted the map to zoom out to a preestablished zoom level (which depended on how &ldquo;big&rdquo; the transition was), then I wanted to put a marker in the new location, then I wanted the map to slide its center over to the new location. It turned out to be not that difficult. gMaps is a great API wrapper for Google Maps API. Between gMaps and jQuery it wasn't that difficult to craft.</p><p>Still I have some issues with javascript. My issues aren't with javascript per se, as in they are the language's problem, they are my problem in that I don't really know how to use the language properly yet. I still don't fully understand how to call functions and functions as extensable objects is still quite confusing to me and also variable scope is killing me. Both of these Ruby is much more straight-forward about (or else I've read more about and understand better). So if anyone wants to point out the innumerable flaws and less than optimal code in the javascript below I'm happy to learn.</p><p>In any event, my script that tied the whole thing together and made Flat Lexie works.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>$</span>(document).<span style=color:#a6e22e>ready</span>(<span style=color:#66d9ef>function</span>(){

  <span style=color:#75715e>// Hide the boxes that are not the first box
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>hide</span>();
  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.section a[href^=&#39;http://&#39;]&#34;</span>).<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;target&#34;</span>,<span style=color:#e6db74>&#34;_blank&#34;</span>);

  <span style=color:#75715e>// Title toggles the view of the content box
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.title &gt; a&#34;</span>).<span style=color:#a6e22e>click</span>(<span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;content&#34;</span>).<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;fast&#39;</span>);
  });

  <span style=color:#75715e>// Initial variables
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>LAT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>first</span>().<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;lat&#39;</span>),
      <span style=color:#a6e22e>LNG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>first</span>().<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;long&#39;</span>),
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>,
      <span style=color:#a6e22e>ZM_IN</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;

  <span style=color:#75715e>// Set the initial map
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>map</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>GMaps</span>({
    <span style=color:#a6e22e>div</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;#map&#39;</span>,
    <span style=color:#a6e22e>zoom</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ZM_OUT</span>,
    <span style=color:#a6e22e>mapTypeId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>google</span>.<span style=color:#a6e22e>maps</span>.<span style=color:#a6e22e>MapTypeId</span>.<span style=color:#a6e22e>HYBRID</span>,
    <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LAT</span>,
    <span style=color:#a6e22e>lng</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LNG</span>
  });
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>addMarker</span>({ <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LAT</span>, <span style=color:#a6e22e>lng</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LNG</span>, });}, <span style=color:#ae81ff>1250</span>);
  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_IN</span>);}, <span style=color:#ae81ff>2500</span>);

  <span style=color:#75715e>// Previous_event clicks should be hidden on the first box, the rest should run the previous transition
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.previous_event&#34;</span>).<span style=color:#a6e22e>click</span>(<span style=color:#a6e22e>prevTransition</span>);
  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>first</span>().<span style=color:#a6e22e>children</span>(<span style=color:#e6db74>&#39;.previous_event&#39;</span>).<span style=color:#a6e22e>hide</span>();

  <span style=color:#75715e>// Next event should run, and reloop if it is the last box
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;.next_event&#34;</span>).<span style=color:#a6e22e>click</span>(<span style=color:#a6e22e>nextTransition</span>);
  <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>last</span>().<span style=color:#a6e22e>children</span>(<span style=color:#e6db74>&#34;.next_event&#34;</span>).<span style=color:#a6e22e>click</span>(<span style=color:#a6e22e>reloopTransition</span>);

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>nextTransition</span>() {
    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.nav a&#39;</span>).<span style=color:#a6e22e>addClass</span>(<span style=color:#e6db74>&#39;disabled&#39;</span>);
    <span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>parents</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;transition&#39;</span>);
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;bigTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;medTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;smallTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>16</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;microTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;
    <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_OUT</span>);
    <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>parents</span>(<span style=color:#e6db74>&#34;.box&#34;</span>).<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
      <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>next</span>().<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>LAT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;lat&#39;</span>),
            <span style=color:#a6e22e>LNG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;long&#39;</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>addMarker</span>({ <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LAT</span>, <span style=color:#a6e22e>lng</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LNG</span>, });}, <span style=color:#ae81ff>750</span>); 
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setCenter</span>(<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lat</span>(), <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lng</span>());}, <span style=color:#ae81ff>1200</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_IN</span>);}, <span style=color:#ae81ff>3750</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.nav a&#39;</span>).<span style=color:#a6e22e>removeClass</span>(<span style=color:#e6db74>&#39;disabled&#39;</span>)}, <span style=color:#ae81ff>4000</span>);
      });
    });
  };

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>prevTransition</span>() {
    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;a&#39;</span>).<span style=color:#a6e22e>addClass</span>(<span style=color:#e6db74>&#39;disabled&#39;</span>);
    <span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>parents</span>(<span style=color:#e6db74>&#39;.box&#39;</span>).<span style=color:#a6e22e>prev</span>().<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;transition&#39;</span>);
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;bigTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;medTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;smallTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>16</span>;
    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>TRANS</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;microTrans&#34;</span>)
      <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>;
    <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_OUT</span>);
    <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>parents</span>(<span style=color:#e6db74>&#34;.box&#34;</span>).<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
      <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>prev</span>().<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>LAT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;lat&#39;</span>),
            <span style=color:#a6e22e>LNG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;long&#39;</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>addMarker</span>({ <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LAT</span>, <span style=color:#a6e22e>lng</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LNG</span>, });}, <span style=color:#ae81ff>750</span>); 
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setCenter</span>(<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lat</span>(), <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lng</span>());}, <span style=color:#ae81ff>1200</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() { <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_IN</span>); }, <span style=color:#ae81ff>3750</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;a&#39;</span>).<span style=color:#a6e22e>removeClass</span>(<span style=color:#e6db74>&#39;disabled&#39;</span>)}, <span style=color:#ae81ff>4500</span>);
      });
    });
  };

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reloopTransition</span>() {
    <span style=color:#a6e22e>ZM_OUT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;
    <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_OUT</span>);
    <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>parents</span>(<span style=color:#e6db74>&#34;.box&#34;</span>).<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
      <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>siblings</span>(<span style=color:#e6db74>&#34;:first&#34;</span>).<span style=color:#a6e22e>slideToggle</span>(<span style=color:#e6db74>&#39;slow&#39;</span>, <span style=color:#66d9ef>function</span>(){
        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>LAT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;lat&#39;</span>),
            <span style=color:#a6e22e>LNG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>data</span>(<span style=color:#e6db74>&#39;long&#39;</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>addMarker</span>({ <span style=color:#a6e22e>lat</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LAT</span>, <span style=color:#a6e22e>lng</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LNG</span>, });}, <span style=color:#ae81ff>750</span>); 
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setCenter</span>(<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lat</span>(), <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>[<span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>markers</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>getPosition</span>().<span style=color:#a6e22e>lng</span>());}, <span style=color:#ae81ff>1200</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() { <span style=color:#a6e22e>map</span>.<span style=color:#a6e22e>setZoom</span>(<span style=color:#a6e22e>ZM_IN</span>); }, <span style=color:#ae81ff>3750</span>);
        <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span>() {<span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;a&#39;</span>).<span style=color:#a6e22e>removeClass</span>(<span style=color:#e6db74>&#39;disabled&#39;</span>)}, <span style=color:#ae81ff>4500</span>);
      });
    });    
  };
});
</code></pre></div><p>For the record, Flat Lexie can easily be adopted to your needs if you have a Flat Stanley project to do. Just fork the repo, add your pictures, add the datapoints.json lat/longs, write any copy you may want and <code>git push heroku</code>. Voila.</p><p>Happy Hacking everyone!</p><p>~ # ~</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://caseykuhlman.com/tags/ruby>ruby</a></span><span class=tag><a href=https://caseykuhlman.com/tags/javascript>javascript</a></span><span class=tag><a href=https://caseykuhlman.com/tags/google-maps>google maps</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=https://github.com/compleatang/site/commit/f8718852f77c053a8320cfc7aac5eec11e008b1d target=_blank rel=noopener>f871885</a> @ 2020-04-09</p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2020</span>
<span><a href=https://caseykuhlman.com/>Casey Kuhlman</a></span>
<span>All Content Licensed CC BY-NC-SA 4.0</span>
<span><a href=https://caseykuhlman.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script><script src=/js/udb.js></script><script src=//static.getclicky.com/js></script></body></html>