<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Casey Kuhlman"><meta name=description content="One of the most obvious appeals of Linux to me is the insane levels of customization you can achieve. I mainly use Gnome Shell as my desktop environment, but since I use Ubuntu I keep Unity on my machine. This is how I start different programs when logging into different desktops."><meta name=keywords content="legaltech,resilience,authoritarianism,linux,gnome,unity"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://caseykuhlman.com/muniments/2013-04-12-autostarting-for-different-linux-desktops/><title>Autostarting Different Programs in Different Desktops :: underWater desert Blogging â€” A Site About Resilience and Authoritarianism</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.min.84ed5579024525d4b50458514d1a43e40dd5272df45c7cd6da85b225af457154.css><meta itemprop=name content="Autostarting Different Programs in Different Desktops"><meta itemprop=description content="One of the most obvious appeals of Linux to me is the insane levels of customization you can achieve. I mainly use Gnome Shell as my desktop environment, but since I use Ubuntu I keep Unity on my machine. This is how I start different programs when logging into different desktops."><meta itemprop=datePublished content="2013-04-12T00:00:00+00:00"><meta itemprop=dateModified content="2013-04-12T00:00:00+00:00"><meta itemprop=wordCount content="639"><meta itemprop=keywords content="linux,gnome,unity,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Autostarting Different Programs in Different Desktops"><meta name=twitter:description content="One of the most obvious appeals of Linux to me is the insane levels of customization you can achieve. I mainly use Gnome Shell as my desktop environment, but since I use Ubuntu I keep Unity on my machine. This is how I start different programs when logging into different desktops."><meta property="article:section" content="linux for lawyers"><meta property="article:published_time" content="2013-04-12 00:00:00 +0000 UTC"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>cd ~/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://caseykuhlman.com/about>About</a></li><li><a href=https://caseykuhlman.com/posts>Entries</a></li><li><a href=https://caseykuhlman.com/muniments>Muniments</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://caseykuhlman.com/muniments/2013-04-12-autostarting-for-different-linux-desktops/>Autostarting Different Programs in Different Desktops</a></h2><div class=post-content><p>One of the most obvious appeals of Linux to me is the insane levels of customization you can achieve. I mainly use Gnome Shell as my desktop environment, but since I use Ubuntu I keep Unity on my machine. I'm not a hater of Unity or Gnome as many Linux users (who can be quite vitriolic in their statements as to desktop environments). I <em>mostly</em> use Gnome, but since Ubuntu has some interesting things going on with Unity sometimes I like to drop into Unity to see what I'm missing.</p><p>There is a problem at least in Ubuntu 12.10 running both desktops. To use Gnome Shell one <em>should</em> install the <code>gdm</code> package in order to get the full Gnome desktop experience - including the Gnome lock screen which is beautiful. GDM stands for Gnome Desktop Manager. It is an alternative to <code>lightdm</code> which Ubuntu installs by default and which Unity uses. When you switch to gdm I found out that just after installing it you should logout of Unity before restarting your machine. But I didn't do that.</p><p>The result of installing gdm and then restarting your machine is that the X server (which runs most of the linux desktops and lies in the stack underneath both gdm and lightdm) doesn't start correctly for &ldquo;both&rdquo; Unity and Shell. It is something to do with the way that dm loads the XSessions and it is beyond my understanding. In any event the problem for me was that while gdm made Shell work as it should out of the box, Unity would not load when I logged into Unity desktop.</p><p>So I built a small autostart script that for Unity that will load Unity after logging into the Ubuntu desktop. This was straight-forward. But the problem I had is that I didn't want the script to try to load Unity when I logged into Gnome. But, as usual with linux, with a bit of Googling I came across the key. In X session desktop scripts (which are the main way to start/run programs) you can define which desktop environment they should show up in. This means that when you put the script into the autostart folder (~/.config/autostart) you can mark the script to &mldr; <code>OnlyShowIn=GNOME;</code> or <code>OnlyShowIn=UNITY;</code> or <code>NotShowIn=GNOME;</code> or <code>NotShowIn=UNITY;</code>. You can add multiple environments for the desktop script to be shown or hidden in after the semicolons.</p><p>This is helpful for showing or hiding certain programs/scripts in your menus in different desktop environments but also when you put it in the scripts in your autostart folder you can tell linux to only load the programs when you log into certain desktop environments. I tested the script and it didn't work at first. The problem was because gdm wasn't loading Unity, the autoload scripts I marked to only load in Unity weren't triggering. Even though gdm sent me to Unity, the desktop environment wasn't loading correctly. So I had to change the script from <code>OnlyShowIn=UNITY;</code> to <code>NotShowIn=GNOME;</code>. This meant that when the desktop environment saw that it was not in Shell it triggered the script for Unity. It isn't ideal as the autoload scripts that are linked to Unity don't run <em>after</em> the Unity reload script runs, but it is a decent enough work around for the amount that I use Unity (minimal).</p><p>This is very powerful as you usually want Gnome Shell and Unity to load the different sugar packages such as applets, indicators, etc., that help you define the environment you are working in. This is reason 7 million why Linux is awesome. In any event, here's the script I use to reload the Unity desktop after I log into Unity.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>[</span>Desktop Entry<span style=color:#f92672>]</span>
Type<span style=color:#f92672>=</span>Application
Exec<span style=color:#f92672>=</span>unity
Hidden<span style=color:#f92672>=</span>false
NoDisplay<span style=color:#f92672>=</span>false
X-GNOME-Autostart-enabled<span style=color:#f92672>=</span>true
Name<span style=color:#f92672>=</span>Unity-Reset
NotShowIn<span style=color:#f92672>=</span>GNOME;</code></pre></div><p>I saved that in ~/.config/autostart and voila all (mostly) working as it should.</p><p>Happy Hacking!</p><p>~ # ~</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://caseykuhlman.com/tags/linux>linux</a></span><span class=tag><a href=https://caseykuhlman.com/tags/gnome>gnome</a></span><span class=tag><a href=https://caseykuhlman.com/tags/unity>unity</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2020</span>
<span><a href=https://caseykuhlman.com/>Casey Kuhlman</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>All Content Licensed CC BY-NC-SA 4.0</a></span>
<span><a href=https://caseykuhlman.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script><script src=/js/udb.js></script><script src=//static.getclicky.com/js></script></body></html>